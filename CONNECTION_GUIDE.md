# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é RetailCRM MCP Server

## üö® –í–∞–∂–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É `OAuth authentication failed` –∏–ª–∏ `502 Bad Gateway` –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç (Manus –∏–ª–∏ Claude) –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OAuth, –∫–æ—Ç–æ—Ä—ã–π **–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è** –≤ –¥–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

–ù–∞—à —Å–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Å—Ç—É—é **API Key –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é**.

---

## 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Claude Desktop

Claude Desktop –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª.

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Claude Desktop:
- **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
- **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
–î–æ–±–∞–≤—å—Ç–µ –≤–∞—à —Å–µ—Ä–≤–µ—Ä –≤ —Å–µ–∫—Ü–∏—é `mcpServers`.

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É (Railway)**
```json
{
  "mcpServers": {
    "retailcrm": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-sse-client",
        "--url",
        "https://rcrm-mcp-production.up.railway.app/sse"
      ]
    }
  }
}
```
*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –î–ª—è —Ä–∞–±–æ—Ç—ã —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Node.js –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ.*

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (Docker)**
–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ –≤ Docker:
```json
{
  "mcpServers": {
    "retailcrm": {
      "command": "docker",
      "args": [
        "exec",
        "-i",
        "retailcrm-mcp-server",
        "node",
        "dist/index.js"
      ],
      "env": {
        "RETAILCRM_URL": "https://your-instance.retailcrm.ru",
        "RETAILCRM_API_KEY": "your-api-key"
      }
    }
  }
}
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Claude
–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä–æ–π—Ç–µ –∏ —Å–Ω–æ–≤–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Claude Desktop. –ó–Ω–∞—á–æ–∫ üîå –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —Ä—è–¥–æ–º —Å –ø–æ–ª–µ–º –≤–≤–æ–¥–∞.

---

## 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Manus

Manus –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ URL.

### –ü—Ä–æ–±–ª–µ–º–∞ —Å OAuth
–í –ª–æ–≥–∞—Ö –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É `OAuth authentication failed`. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ Manus –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–∂–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OAuth –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –≤ Manus, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ SSE**, –∞ –Ω–µ —á–µ—Ä–µ–∑ OAuth-—Ñ–ª–æ—É (–µ—Å–ª–∏ —Ç–∞–∫–æ–π –≤—ã–±–æ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è).

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `manus-mcp-cli` –∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:
1. –£–∫–∞–∂–∏—Ç–µ —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: **SSE (Server-Sent Events)**
2. URL: `https://rcrm-mcp-production.up.railway.app/sse`

**–í–∞–∂–Ω–æ:** –°–µ—Ä–≤–µ—Ä RetailCRM MCP **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç** –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ MCP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (–æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API –∫–ª—é—á –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è). –ï—Å–ª–∏ Manus –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∏–ª–∏ —Ç–æ–∫–µ–Ω –¥–ª—è —Å–∞–º–æ–≥–æ MCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –æ—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–∏ –ø–æ–ª—è –ø—É—Å—Ç—ã–º–∏ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

---

## 3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ n8n

1. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–¥—É **MCP Client**.
2. Connection Type: **Server-Sent Events (SSE)**.
3. URL: `https://rcrm-mcp-production.up.railway.app/sse`.
4. –ù–∞–∂–º–∏—Ç–µ "Execute" –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

---

## üõ† –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ 502 / OAuth Error
–ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É 502 –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –Ω–∞ Railway –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–æ—Ç–∫—Ä–æ–π—Ç–µ `https://rcrm-mcp-production.up.railway.app` –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "RetailCRM MCP Server is running").
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL —Å `/sse` –Ω–∞ –∫–æ–Ω—Ü–µ.
3. –í Claude Desktop —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `npx @modelcontextprotocol/server-sse-client` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É SSE —Å–µ—Ä–≤–µ—Ä—É, —Ç–∞–∫ –∫–∞–∫ Claude Desktop –ø–æ–∫–∞ –Ω–∞—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ stdio (–ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã).

### –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (400)
–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ `Errors in the pagination parameters`:
- RetailCRM API —Ç—Ä–µ–±—É–µ—Ç `limit` —Ä–∞–≤–Ω—ã–º 20, 50 –∏–ª–∏ 100.
- –ù–∞—à —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–æ, –Ω–æ –µ—Å–ª–∏ –≤—ã –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–¥–∞–µ—Ç–µ `limit`, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω.
